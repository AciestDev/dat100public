## UNDER CONSTRUCTION DAT100: Java Programmering 10 - Uke 43

Java-koden som skal brukes i oppgavene nedenfor finnes på den vanlige github-oppbevaringsplassen for faget: https://github.com/dat100hib/dat100public

Gjør en *Repository -> Pull* i GitHub desktop på `dat100public`-oppvebaringsplassen slik du er sikker på at du har den nyeste versjon av koden før du begynner.

## Oppgave 1: Utvidet for-løkke og oppdatering av tabeller

tart med å importere JPLab9-prosjektet inn i Eclipse om du ikke allerede har gjort dette.

Koden for denne oppgaven finnes i pakken `no.hvl.dat100.oppgave1` i JPLab9 Eclipse-prosjektet

Vi ønsker å skrive et program som oppdaterer en tabell `tab` av heltall ved å legge 1 til hvert element i tabellen.

Et første forsøk er koden nedenfor som først skriver ut elementer i tabellen `tab`, så forsøker å oppdatere tabellen ved å bruke en utvidet for-løkke, og til slutt skriver tabellen `tab` igjen.

```java
public class Oppdatering {

  public static void main(String[] args) {

  int[] tab = {1,2,3,4,5,6};

  // skriv ut
    System.out.print("[ ");

  for (int x : tab) {
    System.out.print(x + " ");
  }

  System.out.println("]");

  // oppdater
  for (int x : tab) {
    x = x + 1;
  }

  // skriv ut
  System.out.print("[ ");

  for (int x : tab) {
    System.out.print(x + " ");
  }

  System.out.println("]");
  }

}

```

##### a)

Kjør programmet ovenfor. Blir resultatet som ønsket dvs. blir tabellen oppdatert?

##### b)

Skriv om programmet ovenfor slik tabellen blir korrekt oppdatert dvs. der blir lagt en (1) til hvert heltall i tabellen.

##### c)

Se på klassen `Data` implementeret nedenfor:

```java
public class Data {

	private int data;

	public Data(int d) {
		data = d;
	}
	public int getData() {
		return data;
	}
	public void setData(int data) {
		this.data = data;
	}
	public String toString() {
		return "" + data;
	}
}
```

samt programmet nedenfor som oppretter en tabell med referanser til tre `Data`-objekt og bruker en utvidet for-løkke til å oppdatere alle Data-objekt ved bruk av get og set-metodern på objektene.

```java
public class DataTabell {

	public static void main(String[] args) {

		Data[] tab = new Data[3];

		tab[0] = new Data(1);
		tab[1] = new Data(2);
		tab[2] = new Data(3);

		for (Data d : tab) {
			System.out.print(d + " ");
		}
		System.out.println();

		for (Data d : tab) {
			d.setData(d.getData() + 1);
		}


		for (Data d : tab) {
			System.out.print(d + " ");
		}
		System.out.println();

	}
}
```

Kjør programmet. Oppdateres objektene som ønskes i utvidet for-løkke? Hvorfor virker en utvidet for-løkke her mens den ikke virket for oppdatering i deloppgave a)?

### Oppgave 2 - Referansetabeller

I denne og i neste oppgave skal vi se på en klasse `Vare` og referansetabeller.

I oppgavene du ta utgangspunkt i start-kode med enhetstester som finnes på følgende github oppbevaringsplass:

https://github.com/dat100hib/jplab7-startcode-varelager.git

Du kan gjøre en *Use this template* på denne oppbevaringsplassen (på github) etterfulgt av *klone* og importering inn i Eclipse tilsvarende som for Java Innlevering 2 (start-koden for oppgavene med tabeller og matriser).

Når du har gjort dette skal du ha tilgang til et prosjekt `jplab6-varelager-startkode` som inneholder to pakker:

- `no.hvl.dat100.varelager` med startkode for de klasser og metoder du skal implementere nedenfor.
- `no.hvl.dat100.varelager.tests` med en rekke enhetstest som du skal bruke til å teste koden etterhvert som du implementerer.

Du kjører enhetstestene på samme måte som på Java Innlevering 2.

##### a) Objektvariable og konstruktør

Se på start-koden for klassen `Vare.java`.

Skriv kode slik klassen får tre objektvariable:

-	varenr (heltall)
-	navn (streng)
-	pris (desimaltall)

som alle skal være `private` dvs. kun synlige innenfor klassen.

Videre skal klassen ha en *konstruktør*

```java
public Vare(int varenr, String navn, double pris)
```

som kan gi verdi til alle objektvariable.

Test implementasjonen din ved å kjøre testene i test-klassen `TestVare.java`

##### b) get/set-metoder

Gjør ferdig implementasjonen av get/set metoder og test de med enhetstestene.

##### c) Objektmetoder

Gjør ferdig implementasjonen av følgende metoder som alle er `public` dvs. synlige utenfor klassen:

- `public double beregnMoms()` – som beregner moms svarende til 20% av prisen som er gitt ved objektvariabelen pris. Dersom pris er 100 kr, skal moms være 20 kr.
- `erBilligereEnn(Vare v)` – skal sammenligne prisen på en vare med en annen vare `v` gitt som parameter.
- `toString()` –  som returnerer en strengrepresentasjon av objektvariablene på formen: `Vare [varenr=1, navn=ostepops, pris=200.0]`

Test implementasjonen ved å bruke enhetstestene.


I denne oppgaven skal vi bruke referanasetabeller dvs. tabeller der elementene som er lagret er pekere til objekt. I dette tilfelle skal vi bruke en tabell til å implementere et varelager dvs. elementene i tabellen er pekere til objekt av klassen `Vare`.

Starten på implementasjonen finnes i klassen `Varelager.java`:

```java
public class Varelager {

 protected Vare[] varer;
 protected int antall;

 [...]

```

Objektvariabelen `varer` skal brukes til å peke på referansetabellen av varar. Objektvariabelen `antall` skal brukes ifm. med innsettelse i tabellen til å holde kontroll på hvor (dvs. på hvilken posisjon/indeks) neste vare skal settes inn.

Variabelen `antall` vil til ethvert tidspunkt angi hvor mange varer som er satt inn i tabellen. Indeks der det ikke er satt inn noen vare vil ha verdien `null` (en null-peker).

De to objektvariable har modifikatoren `protected` for å gjøre det enklere å teste klassen. Testene for klassen finnes i klassen `TestVarelager.java`.

##### a)

Gjør ferdig implementasjonen av følgende metoder:

- `public Varelager(int n)` som er kontruktør for klassen. Konstruktøren skal opprettet en tabell av varer gitt ved parameteren `n` og sette `antall` lik `0` (siden første element skal inn på position 0).

- `public Vare[] getVarer()` som returnerer en referanse til tabellen `varer`

- `public boolean leggTilVare(Vare v)` som setter inn varen `v` i `varer`-tabellen på posisjonen angitt ved objektvariablen `antall`. Videre skal metoden inkrementere `antall` slik neste vare kommmer inn på neste posisjon. Metoden skal kun sette inn `v` hvis der er plass i tabellen dvs. hvis `antall` er strengt mindre enn `varer.length`. Metoden skal returnere `true` om varen blev satt inn og `false` ellers.

- `public boolean leggTil(int varenr, String navn, double pris)` som oppretter et nytt vare-objekt med varenummer, navn og pris gitt som parametre til metoden, og legger inn det nye vare-objekt i varelageret. Metoden skal returnere `true` om vare-objektet blev lagt til og `false` ellers. Metoden skal bruke `leggTilVare`-metoden som implementert ovenfor til å legge inn vare-objektet i varelageret.

- `public Vare finnVare(int varenr)` som gitt et `varenr` søker igjennom tabellen `varer` og ser om der finnes en vare i tabellen med dette varenummer. Om varen finnes skal metoden returnere en peker til varen som er funnet. Husk å avbryte søket hvis funnet. Hvis ikke vare finnes da skal metoden returnere `null`.  **Hint:** Bruk while-løkke eller vanlig for løkke.

- `public void printVarelager()` som skal skrive ut varelageret på følgende formen (**hint**: bruk løkke og `toString-metoden` på Vare-objekt)

```
=================================
Vare [varenr=0, navn=0, pris=1.0]
Vare [varenr=1, navn=1, pris=2.0]
Vare [varenr=2, navn=2, pris=3.0]
=================================
```

##### b)

I klassen `VarelagerUtils.java` skal du implementere metodene nedenfor. Enhetstester for metodene finnes i filen `TestUtils.java`. Du kan anta at tabellen som gis med som parameter er fyllt dvs. at alle elementer inneholder en referanse til et vare-objekt.

- `public static Vare finnBilligste(Vare[] varer)` som tar en (referanse)tabell med vare-objekt og returnerer en peker til et av de vare-objekt som er billigst.

- `public static double totalPris(Vare[] varer)` som finner den samlede pris på alle varer.

- `public static int[] finnVarenr(Vare[] varer)` som returnerer en tabell med varenumre for alle varer i lageret. **Hint:** metoden skal opprette en ny tabell av heltall og sette inn varenumrene for de varene som finnes i tabelle `varer`.

- `public static double[] finnPrisDifferanser(Vare[] varer)` beregner de successive differenser på prisene i tabellen. Metoden skal opprette en tabell av desimalltall som er en korterte enn tabellen `varer` og på posisjon `i` i denne tabellen skal der stå differensen på prisen mellom varen i posisjon `i+1` og posisjon `i`.

### Valgfri Oppgave 3 - Simulere terningkast: Random-klassen og tabeller

I denne oppgaven skal vi simulere terningkast. Et alternativ til å bruke `Math.random()` er å bruke `Random`-klassen. Denne klassen inneholder en metode `nextInt(int grense)` som returnerer et tilfeldig heltall fra og med 0 til (men ikke med) grense. Dette er en objekt-metode, så det må lages et Random-objekt før metoden kan brukes. Samme objektet kan brukes for å generere flere tilfeldige tall.

Få å løse denne oppgaven anbefales det å se på Eksempel 5.2, side 176 i java-boken. Skisse:

##### a)

Du skal lage et program som kaster en terning 100 ganger og viser diverse resultater på skjermen. Skjermbildet skal se ut omtrent som nedenfor der det skrives ut 20 kast pr. linje i den første delen

```
TERNINGKASTSIMULATOR

3   2   6   1 ..	.. 1   6
5   2   1   6 ..	.. 5   6
.
.
6   3 ..	.. 3   1   1   4

Antall kast  : 100
Antall 6-ere :  14
Antall 5-ere :  16
.
.
Antall 1-ere :  20

Gjennomsnittskast : 3.56

Antall kast for å få den første 6-eren : 3

Terningverdien det var flest av : 1

```

Programmet skal organiseres i tre klasser:

- En klasse `Terning.java` som representerer terninger i programmet. Se nedenfor.

- En klasse `Simulering.java` som representerer resultater fra én simulering. Verdiene/kastene legges inn i en tabell med plass til 100 elementer . Metodene i klassen skal finne ut hvor mange kast det ble av hver verdi og legge de i en tabell med plass til seks elementer. **Nøtt:** Prøv å få til det siste uten å bruke if eller switch.

- En klasse `Utskrift.java` som har ansvar for utskrift av en simulering. Svarene skrives ut på skjermen slik det er indikert ovenfor. En viktig design beslutning er i hvilken klasse statistikken skal beregnes.

Begynnelsen på klassen `Terning.java` finnes nedenfor og i pakken `no.hvl.dat100.oppgaveb4`.

```java
public class Terning {

  // aktuell verdi for terningen
  private int oyne;

  public Terning() {
  // TODO
  }

  public int getOyne() {

  return 0; // TODO
  }

  public void trill() {
  // TODO
  }
}
```

##### b)

Utvid programmet slik utskriften bruker symboler for terningene. Et eksempel er gitt nedenfor

```
TERNINGKASTSIMULATOR

[:::] [...] [: :] [:.:] [ : ] [:.:] [ . ] [:::] [ : ] [ . ]
[:.:] [: :] [:.:] [ : ] [ : ] [:::] [:.:] [: :] [ . ] [...]
[ : ] [ . ] [: :] [:::] [: :] [...] [:.:] [:.:] [...] [ . ]
[ : ] [: :] [:.:] [: :] [:.:] [:::] [...] [: :] [...] [: :]
[:::] [:::] [ : ] [: :] [:.:] [...] [:::] [:.:] [: :] [...]
[: :] [...] [:::] [ . ] [:::] [...] [:.:] [...] [: :] [ . ]
[: :] [ : ] [ : ] [:.:] [ . ] [ . ] [:.:] [ . ] [...] [ . ]
[...] [: :] [ : ] [:::] [:::] [ : ] [:.:] [:.:] [...] [:::]
[ . ] [:.:] [:::] [: :] [:.:] [: :] [ . ] [:.:] [:::] [:.:]
[...] [: :] [...] [:::] [: :] [ : ] [:::] [:.:] [...] [ : ]

Antall kast : 100
Antall [:::]-ere:  17
Antall [:.:]-ere:  21
Antall [: :]-ere:  19
Antall [...]-ere:  17
Antall [ : ]-ere:  13
Antall [ . ]-ere:  13

Gjennomsnittskast : 3,730

Antall kast for å få den første [:::]-eren: 1

Terningverdien det var flest av : [:.:]
```