## DAT100: Java Programmering 10 - Uke 43

Java-koden som skal brukes i oppgavene nedenfor finnes på den vanlige github-oppbevaringsplassen for faget: https://github.com/dat100hib/dat100public

Gjør en *Repository -> Pull* i GitHub Desktop (eller en annen Git klient) på `dat100public`-oppvebaringsplassen slik du er sikker på at du har den nyeste versjon av koden før du begynner.

Start med å importere `jplab10code`-prosjektet inn i IntelliJ om du ikke allerede har gjort dette.

## Oppgave 1: Utvidet for-løkke og oppdatering av tabeller

Koden for denne oppgaven finnes i pakken `no.hvl.dat100.jplab10.oppgave1`

Vi ønsker å skrive et program som oppdaterer en tabell `tab` av heltall ved å legge 1 til hvert element i tabellen.

Et første forsøk er koden nedenfor som først skriver ut elementer i tabellen `tab`, så forsøker å oppdatere tabellen ved å bruke en utvidet for-løkke, og til slutt skriver tabellen `tab` igjen.

```java
public class Oppdatering {

  public static void main(String[] args) {

  int[] tab = {1,2,3,4,5,6};

  // skriv ut
    System.out.print("[ ");

  for (int x : tab) {
    System.out.print(x + " ");
  }

  System.out.println("]");

  // oppdater
  for (int x : tab) {
    x = x + 1;
  }

  // skriv ut
  System.out.print("[ ");

  for (int x : tab) {
    System.out.print(x + " ");
  }

  System.out.println("]");
  }

}

```

##### a)

Kjør programmet ovenfor. Blir resultatet som ønsket dvs. blir tabellen oppdatert?

##### b)

Skriv om programmet ovenfor slik tabellen blir korrekt oppdatert dvs. der blir lagt en (1) til hvert heltall i tabellen.

##### c)

Se på klassen `Data` implementeret nedenfor:

```java
public class Data {

	private int data;

	public Data(int d) {
		data = d;
	}
	public int getData() {
		return data;
	}
	public void setData(int data) {
		this.data = data;
	}
	public String toString() {
		return "" + data;
	}
}
```

samt programmet nedenfor som oppretter en tabell med referanser til tre `Data`-objekt og bruker en utvidet for-løkke til å oppdatere alle Data-objekt ved bruk av get og set-metodene på objektene.

```java
public class DataTabell {

	public static void main(String[] args) {

		Data[] tab = new Data[3];

		tab[0] = new Data(1);
		tab[1] = new Data(2);
		tab[2] = new Data(3);

		for (Data d : tab) {
			System.out.print(d + " ");
		}
		System.out.println();

		for (Data d : tab) {
			d.setData(d.getData() + 1);
		}


		for (Data d : tab) {
			System.out.print(d + " ");
		}
		System.out.println();

	}
}
```

Kjør programmet. Oppdateres objektene som ønskes i utvidet for-løkke? Hvorfor virker en utvidet for-løkke her mens den ikke virket for oppdatering i deloppgave a)?

### Oppgave 2 - Referansetabeller

I denne oppgave skal du bygge videre på klassen `Vare` fra tidligere programmeringslab og hvordan vare-objekt kan lagres via referansetabeller.

Startkoden finnes pakken `no.hvl.dat100.jplab10.oppgave2`. I pakken `no.hvl.dat100.jplab10.oppgave2tests` under `test/java` i prosjektet finnes unit-tests som kan brukes til å teste implementasjonen med.

Du kjører enhetstestene på samme måte som på Java Innlevering 2.

Klassen `Vare.java` inneholder en implementasjon av en klasse slik objekter av klassen kan brukes til å representere varer.

Vi skal bruke referanasetabeller dvs. tabeller der elementene som er lagret er pekere til objekt. I dette tilfelle skal vi bruke en tabell til å implementere et varelager dvs. elementene i tabellen er pekere til objekt av klassen `Vare`.

Starten på implementasjonen finnes i klassen `Varelager.java`:

```java
public class Varelager {

 protected Vare[] varer;
 protected int antall;

 [...]

```

Objektvariabelen `varer` skal brukes til å peke på referansetabellen av varar. Objektvariabelen `antall` skal brukes ifm. med innsettelse i tabellen til å holde kontroll på hvor (dvs. på hvilken posisjon/indeks) neste vare skal settes inn.

Variabelen `antall` vil til ethvert tidspunkt angi hvor mange varer som er satt inn i tabellen. Indeks der det ikke er satt inn noen vare vil ha verdien `null` (en null-peker).

De to objektvariable har modifikatoren `protected` for å gjøre det enklere å teste klassen. Testene for klassen finnes i klassen `TestVarelager.java`.

##### a)

Gjør ferdig implementasjonen av følgende metoder:

- `public Varelager(int n)` som er kontruktør for klassen. Konstruktøren skal opprettet en tabell av varer gitt ved parameteren `n` og sette `antall` lik `0` (siden første element skal inn på position 0).

- `public Vare[] getVarer()` som returnerer en referanse til tabellen `varer`

- `public boolean leggTilVare(Vare v)` som setter inn varen `v` i `varer`-tabellen på posisjonen angitt ved objektvariablen `antall`. Videre skal metoden inkrementere `antall` slik neste vare kommmer inn på neste posisjon. Metoden skal kun sette inn `v` hvis der er plass i tabellen dvs. hvis `antall` er strengt mindre enn `varer.length`. Metoden skal returnere `true` om varen blev satt inn og `false` ellers.

- `public boolean leggTil(int varenr, String navn, double pris)` som oppretter et nytt vare-objekt med varenummer, navn og pris gitt som parametre til metoden, og legger inn det nye vare-objekt i varelageret. Metoden skal returnere `true` om vare-objektet blev lagt til og `false` ellers. Metoden skal bruke `leggTilVare`-metoden som implementert ovenfor til å legge inn vare-objektet i varelageret.

- `public Vare finnVare(int varenr)` som gitt et `varenr` søker igjennom tabellen `varer` og ser om der finnes en vare i tabellen med dette varenummer. Om varen finnes skal metoden returnere en peker til varen som er funnet. Husk å avbryte søket hvis funnet. Hvis ikke vare finnes da skal metoden returnere `null`.  **Hint:** Bruk while-løkke eller vanlig for løkke.

- `public void printVarelager()` som skal skrive ut varelageret på følgende formen (**hint**: bruk løkke og `toString-metoden` på Vare-objekt)

```
=================================
Vare [varenr=0, navn=0, pris=1.0]
Vare [varenr=1, navn=1, pris=2.0]
Vare [varenr=2, navn=2, pris=3.0]
=================================
```

##### b)

I klassen `VarelagerUtils.java` skal du implementere metodene nedenfor. Enhetstester for metodene finnes i filen `TestUtils.java`. Du kan anta at tabellen som gis med som parameter er fyllt dvs. at alle elementer inneholder en referanse til et vare-objekt.

- `public static Vare finnBilligste(Vare[] varer)` som tar en (referanse)tabell med vare-objekt og returnerer en peker til et av de vare-objekt som er billigst.

- `public static double totalPris(Vare[] varer)` som finner den samlede pris på alle varer.

- `public static int[] finnVarenr(Vare[] varer)` som returnerer en tabell med varenumre for alle varer i lageret. **Hint:** metoden skal opprette en ny tabell av heltall og sette inn varenumrene for de varene som finnes i tabelle `varer`.

- `public static double[] finnPrisDifferanser(Vare[] varer)` beregner de successive differenser på prisene i tabellen. Metoden skal opprette en tabell av desimalltall som er en korterte enn tabellen `varer` og på posisjon `i` i denne tabellen skal der stå differensen på prisen mellom varen i posisjon `i+1` og posisjon `i`.

### Oppgave 3 (Valgfri) - Simulere terningkast: Random-klassen og tabeller

I denne oppgaven skal vi simulere terningkast. Et alternativ til å bruke `Math.random()` er å bruke `Random`-klassen. Denne klassen inneholder en metode `nextInt(int grense)` som returnerer et tilfeldig heltall fra og med 0 til (men ikke med) grense. Dette er en objekt-metode, så det må lages et Random-objekt før metoden kan brukes. Samme objektet kan brukes for å generere flere tilfeldige tall.

Få å løse denne oppgaven anbefales det å se på Eksempel 5.2, side 176 i java-boken. Skisse:

##### a)

Du skal lage et program som kaster en terning 100 ganger og viser diverse resultater på skjermen. Skjermbildet skal se ut omtrent som nedenfor der det skrives ut 20 kast pr. linje i den første delen

```
TERNINGKASTSIMULATOR

3   2   6   1 ..	.. 1   6
5   2   1   6 ..	.. 5   6
.
.
6   3 ..	.. 3   1   1   4

Antall kast  : 100
Antall 6-ere :  14
Antall 5-ere :  16
.
.
Antall 1-ere :  20

Gjennomsnittskast : 3.56

Antall kast for å få den første 6-eren : 3

Terningverdien det var flest av : 1

```

Programmet skal organiseres i tre klasser:

- En klasse `Terning.java` som representerer terninger i programmet. Se nedenfor.

- En klasse `Simulering.java` som representerer resultater fra én simulering. Verdiene/kastene legges inn i en tabell med plass til 100 elementer . Metodene i klassen skal finne ut hvor mange kast det ble av hver verdi og legge de i en tabell med plass til seks elementer. **Nøtt:** Prøv å få til det siste uten å bruke if eller switch.

- En klasse `Utskrift.java` som har ansvar for utskrift av en simulering. Svarene skrives ut på skjermen slik det er indikert ovenfor. En viktig design beslutning er i hvilken klasse statistikken skal beregnes.

Begynnelsen på klassen `Terning.java` finnes nedenfor og i pakken `no.hvl.dat100.jplab10.oppgave3`.

```java
public class Terning {

  // aktuell verdi for terningen
  private int oyne;

  public Terning() {
  // TODO
  }

  public int getOyne() {

  return 0; // TODO
  }

  public void trill() {
  // TODO
  }
}
```

##### b)

Utvid programmet slik utskriften bruker symboler for terningene. Et eksempel er gitt nedenfor

```
TERNINGKASTSIMULATOR

[:::] [...] [: :] [:.:] [ : ] [:.:] [ . ] [:::] [ : ] [ . ]
[:.:] [: :] [:.:] [ : ] [ : ] [:::] [:.:] [: :] [ . ] [...]
[ : ] [ . ] [: :] [:::] [: :] [...] [:.:] [:.:] [...] [ . ]
[ : ] [: :] [:.:] [: :] [:.:] [:::] [...] [: :] [...] [: :]
[:::] [:::] [ : ] [: :] [:.:] [...] [:::] [:.:] [: :] [...]
[: :] [...] [:::] [ . ] [:::] [...] [:.:] [...] [: :] [ . ]
[: :] [ : ] [ : ] [:.:] [ . ] [ . ] [:.:] [ . ] [...] [ . ]
[...] [: :] [ : ] [:::] [:::] [ : ] [:.:] [:.:] [...] [:::]
[ . ] [:.:] [:::] [: :] [:.:] [: :] [ . ] [:.:] [:::] [:.:]
[...] [: :] [...] [:::] [: :] [ : ] [:::] [:.:] [...] [ : ]

Antall kast : 100
Antall [:::]-ere:  17
Antall [:.:]-ere:  21
Antall [: :]-ere:  19
Antall [...]-ere:  17
Antall [ : ]-ere:  13
Antall [ . ]-ere:  13

Gjennomsnittskast : 3,730

Antall kast for å få den første [:::]-eren: 1

Terningverdien det var flest av : [:.:]
```